var CommonAddressFields=function(){this.prototype={};var n=this;return n.addressLine1=null,n.addressLine2=null,n.suiteType=null,n.suiteTypeSelectedValue=null,n.suiteTypeText=null,n.zipCode=null,n.city=null,n.cityList=null,n.cityListSelectedValue=null,n.state=null,n.stateList=null,n.stateListSelectedValue=null,n.country=null,n.countryText=null,n.countryList=null,n.proxyFieldsPostfix="Proxy",n.partialFieldsPostfix="Partial",n.rfc=null,n.showCityList=!1,n.showSuiteTypeAndText=!0,n.showRfc=!1,n.addressType="None",n.parentCallbackFunction=null,{addressLine1:n.addressLine1,addressLine2:n.addressLine2,suiteType:n.suiteType,suiteTypeSelectedValue:n.suiteTypeSelectedValue,suiteTypeText:n.suiteTypeText,zipCode:n.zipCode,city:n.city,cityList:n.cityList,cityListSelectedValue:n.cityListSelectedValue,state:n.state,stateList:n.stateList,stateListSelectedValue:n.stateListSelectedValue,country:n.country,countryText:n.countryText,countryList:n.countryList,rfc:n.rfc,showCityList:n.showCityList,showSuiteTypeAndText:n.showSuiteTypeAndText,showRfc:n.showRfc,proxyFieldsPostfix:n.proxyFieldsPostfix,partialFieldsPostfix:n.partialFieldsPostfix,addressType:n.addressType,parentCallbackFunction:n.parentCallbackFunction}},CommonAddress=function(n){this.prototype={};var t=this;return t.id=n,t.mode="viewMode",t.$parent=$("[data-instance-id='"+n+"']"),t.editModeAddressData=t.$parent.find(".editMode").html(),t.editModeInstanceId=parseInt(t.$parent.find(".editMode").attr("data-instance-id"),10),t.originalAddressFields=new CommonAddressFields,t.savedAddressData=t.$parent.find(".savedAddress").html(),t.isAddressSaved=!1,{id:t.id,mode:t.mode,$parent:t.$parent,editModeAddressData:t.editModeAddressData,editModeInstanceId:t.editModeInstanceId,originalAddressFields:t.originalAddressFields,isAddressSaved:t.isAddressSaved,savedAddressData:t.savedAddressData}},CommonAddressHelper=function(){function i(n){return t.getClient(n)}function r(n,i){t.isClientPresent(n)||t.push({key:n,value:i})}this.prototype={};var n=this,t=[];return Array.prototype.isClientPresent=function(n){for(var i=this,r=!1,t=0;t<i.length;t++)if(i[t].key===n){r=!0;break}},Array.prototype.getClient=function(n){var i=this,t=$.grep(i,function(t){return t.key===parseInt(n,10)});return t.length>0?t[0].value:null},n.getCommonAddressClient=i,n.registerCommonAddressClient=r,{registerCommonAddressClient:n.registerCommonAddressClient,getCommonAddressClient:n.getCommonAddressClient}}(),DialogOperations={},AddressVerificationHelper;DialogOperations.dialogStatus="None";DialogOperations.dialogOpened=function(){DialogOperations.dialogStatus="Open"};DialogOperations.dialogClosed=function(){DialogOperations.dialogStatus="Closed"};AddressVerificationHelper=function(){function a(n){return t.getAddressObject(n)}function i(n){var i=$(n).parents(".dataInstanceContainer").attr("data-instance-id");return t.getAddressObject(i)}function e(){var f=!0,i=!1,n,u;for(console.log(t),n=0;n<t.length;n++){for(i=!1,console.log(t[n].originalAddressFields.addressSelectionMode),t[n].originalAddressFields.addressSelectionMode==="VerificationLevelVerified"&&(i=!0),u=0;u<r.length;u++)if(t[n].id===r[u].id){i=!0;break}if(!i){f=!1;break}}return f}function v(n,i){if(typeof n!="undefined"&&typeof n=="number"&&!t.isAddressPresent(n)){var r=new CommonAddress(n);return t.push(r),typeof i!="undefined"&&(r.originalAddressFields=i),r}return null}function y(n,t,r){var u=i(n),o,e;u!=null&&(o=u.editModeInstanceId,e=f(u,o),e!=null&&(d(u),ProcessAjaxGeneric("Post","json",$.param(e),"Shared","OnlineAddressVerification","ValidateAddress",function(i){w(i,n,t,r)},function(n){typeof n!="undefined"&&n!=null&&p(n)},null)))}function p(n){alert("Address validation failed.Exception Details:\n"+n)}function w(n,t,i,r){if(typeof n!="undefined"&&n!=null){var u=$.parseJSON(n);u!=null&&(typeof u.IsValid!="undefined"&&u.IsValid===!0?s(t,i,r):b(t,u))}}function b(n,t){var e=i(n),r,f,u;t!=null&&e!=null&&e.editModeInstanceId!="undefined"&&(r=e.$parent.find("[data-instance-id='"+e.editModeInstanceId+"']"),r!=null&&(typeof t.AddressLine1Error!="undefined"&&(r.find(".addressLine1ErrorField").html(t.AddressLine1Error),r.find(".addressLine1ErrorRow").show()),typeof t.ZipCodeError!="undefined"&&(r.find(".zipCodeErrorField").html(t.ZipCodeError),r.find(".zipCodeErrorRow").show()),typeof t.StateError!="undefined"&&(r.find(".stateErrorField").html(t.StateError),r.find(".stateErrorRow").show()),typeof t.CityError!="undefined"&&(r.find(".cityErrorField").html(t.CityError),r.find(".cityErrorRow").show()),typeof t.SuiteTypeAndTextError!="undefined"&&(r.find(".suiteTypeAndTextErrorField").html(t.SuiteTypeAndTextError),r.find(".suiteTypeAndTextErrorRow").show()),typeof t.RfcError!="undefined"&&(r.find(".rfcErrorField").html(t.RfcError),r.find(".rfcErrorRow").show()),typeof t.State!="undefined"&&t.State!=null&&t.State!==""&&r.find("select.state").val(t.State),typeof t.City!="undefined"&&t.City!=null&&t.City!==""?(f=r.find("input.city"),u=r.find("select.cityListSelectedValue"),f.val(t.City),u.val(t.City),u.hide(),f.show()):typeof t.CityList!="undefined"&&t.CityList!=null&&(f=r.find("input.city"),u=r.find("select.cityListSelectedValue"),f.val(""),k(u,t.CityList),u.prop("selectedIndex",0),f.hide(),u.show())))}function k(n,t){n!=null&&t!=null&&(n.empty(),$(t).each(function(){var i=this,t=$("<option />");t.prop("value",i.Value).text(i.Text);n.append(t);t=null}))}function d(n){n!=null&&n.editModeInstanceId!=null&&$("[data-instance-id='"+n.editModeInstanceId+"']").find(".errorRow").hide()}function g(n){var r=parseInt(n.$parent.find(".selectedPicklistIndex").val(),10),t=new CommonAddressFields,u,i;return r>=0&&(u=n.$parent.find("div.pickList"),i=u.find("td."+r),t.addressLine1=i.find(".addressLine1").val(),t.addressLine2=i.find(".addressLine2").val(),t.suiteTypeSelectedValue=i.find(".suiteTypeSelectedValue").val(),t.suiteTypeText=i.find(".suiteTypeText").val(),t.zipCode=i.find(".zipCode").val(),t.city=i.find(".city").val(),t.cityListSelectedValue=i.find(".city").val(),t.state=i.find(".state").val(),t.country=i.find(".country").val(),t.countryText=$(i).find(".countryText").length>0?i.find(".countryText").text():i.find(".country option:selected").text(),t.rfc=null,t.showCityList=!1,t.showSuiteTypeAndText=$(i).find(".showSuiteTypeAndText").val(),t.showRfc=!1,t.accountType=n.$parent.find(".accountType").val()),t}function nt(n){var t=new CommonAddressFields,i=n.$parent.find("tr.formattedAddress"),r=i.find("input.formattedAddress").prop("checked");return typeof r=="undefined"&&(r=!1),t.addressLine1=i.find(".addressLine1").val(),t.addressLine2=r?i.find(".addressLine2").val():i.find(".addressLine2WithRetentionInfo").val(),t.suiteTypeSelectedValue=i.find(".suiteTypeSelectedValue").val(),t.suiteTypeText=i.find(".suiteTypeText").val(),t.zipCode=i.find(".zipCode").val(),t.city=i.find(".city").val(),t.cityListSelectedValue=i.find(".city").val(),t.state=i.find(".state").val(),t.country=i.find(".country").val(),t.countryText=$(i).find(".countryText").length>0?i.find(".countryText").text():i.find(".country option:selected").text(),t.rfc=null,t.showCityList=!1,t.showSuiteTypeAndText=$(i).find(".showSuiteTypeAndText").val(),t.showRfc=!1,t.accountType=n.$parent.find(".accountType").val(),t}function f(n){var i=new CommonAddressFields,t=n.$parent.find(".editMode");return i.addressLine1=$(t).find(".addressLine1").val(),i.addressLine2=$(t).find(".addressLine2").val(),i.suiteTypeSelectedValue=$(t).find(".suiteTypeSelectedValue").val(),i.suiteTypeText=$(t).find(".suiteTypeText").val(),i.zipCode=$(t).find(".zipCode").val(),i.city=$(t).find(".city").val(),i.cityListSelectedValue=$(t).find(".cityListSelectedValue").val(),i.state=$(t).find(".state").val(),i.country=$(t).find(".country").val(),i.countryText=$(t).find(".countryText").length>0?$(t).find(".countryText").text():$(t).find(".country option:selected").text(),i.rfc=$(t).find(".rfc").val(),i.showCityList=$(t).find(".showCityList").val(),i.showSuiteTypeAndText=$(t).find(".showSuiteTypeAndText").val(),i.showRfc=$(t).find(".showRfc").val(),i.accountType=$(t).find(".accountType").val(),i}function o(n){var i=new CommonAddressFields,t=n.$parent.find(".originalAddress");return typeof t!="undefined"&&t!==null&&t.length>0&&(i.addressLine1=t.find(".addressLine1").text(),i.addressLine2=t.find(".addressLine2").text(),i.suiteTypeSelectedValue=t.find(".suiteTypeSelectedValue").text(),i.suiteTypeText=t.find(".suiteTypeText").text(),i.zipCode=t.find(".zipCpde").text(),i.city=t.find(".city").text(),i.state=t.find(".state").text(),i.country=t.find(".country").val(),i.countryText=t.find(".countryText").text()),i}function tt(n,t){var r=o(n),i;return typeof r!="undefined"&&r!==null&&(i=n.$parent.find(".suggestionsPanel"),typeof i!="undefined"&&i!==null&&i.length>0&&(t==="UsePremisePartial"?(r.suiteTypeText=i.find(".suiteTypeText").val()||"",r.suiteTypeSelectedValue=i.find(".suiteTypeSelectedValue option:selected").val()||""):t==="UseStreetPartial"&&(r.addressLine1=i.find(".addressLine1").val(),r.addressLine2=i.find(".addressLine2").val()))),r}function it(n,t){var i=null;if(typeof n!="undefined"&&n!==null&&typeof t!="undefined"&&t!==null)switch(t){case"UseAsEntered":i=o(n);break;case"UseStreetPartial":case"UsePremisePartial":i=tt(n,t);break;case"UseAddress":i=f(n);break;case"UseSuggested":i=nt(n);break;case"UseSelected":i=g(n)}return i}function s(n,t,f){var o=i(n),s;console.log(o);typeof o!="undefined"&&o!==null&&(r.isAddressPresent(o.id)||r.push(o),o.$parent.find(".addressSelectionMode").val(t),o.isAddressSaved=!0);typeof f!="undefined"&&typeof f=="function"&&f();typeof u!="undefined"&&typeof u=="function"&&e()?(DialogOperations.dialogClosed(),u()):(s=it(o,t),rt(o,s),ft(o,s),ut(o),h(o));o=null}function h(n){typeof n!="undefined"&&n!==null&&(n.$parent.find(".viewMode").hide(),n.$parent.find(".editMode").hide(),n.$parent.find(".saveMode").show(),n.mode="saveMode")}function rt(n,t){if(typeof n!="undefined"&&n!==null&&typeof t!="undefined"&&t!==null){var i=n.$parent.find(".savedAddress");typeof i!="undefined"&&i!==null&&(et(n,i),t.addressLine1!==null&&i.find(".addressLine1").text(t.addressLine1),t.addressLine2!==null&&t.addressLine2!==""?i.find(".addressLine2").text(t.addressLine2):(i.find(".addressLine2").hide(),i.find(".addressLine2Break").hide()),t.suiteTypeSelectedValue!==null&&t.suiteTypeText!==null&&(i.find(".suiteTypeSelectedValue").text(t.suiteTypeSelectedValue),i.find(".suiteTypeText").text(t.suiteTypeText)),t.zipCode!==null&&i.find(".zipCpde").text(t.zipCode),(t.city!==null||t.cityListSelectedValue!==null)&&i.find(".city").text(t.city||t.cityListSelectedValue),t.state!==null&&i.find(".state").text(t.state),t.countryText!==null&&i.find(".countryText").text(t.countryText),t.country!==null&&i.find(".country").val(t.country))}}function ut(n){if(typeof n!="undefined"&&n!==null){var i=n.$parent.find(".originalAddress"),t=n.$parent.find(".savedAddress");i.length>0&&t.length>0&&(i.html(t.html()),n.savedAddressData=t.html())}}function ft(n,t){if(typeof n!="undefined"&&n!==null&&typeof t!="undefined"&&t!==null){var i=n.$parent.find(".editMode");typeof i!="undefined"&&i!==null&&i.length>0&&(t.addressLine1!==null&&i.find(".addressLine1").val(t.addressLine1),t.addressLine2!==null&&i.find(".addressLine2").val(t.addressLine2),t.suiteTypeSelectedValue!==null&&t.suiteTypeText!==null&&(i.find(".suiteTypeSelectedValue").val(t.suiteTypeSelectedValue),i.find(".suiteTypeText").val(t.suiteTypeText)),t.zipCode!==null&&i.find(".zipCode").val(t.zipCode),t.city!==null&&i.find(".city").val(t.city),t.cityListSelectedValue!==null&&i.find(".cityListSelectedValue").val(t.cityListSelectedValue),t.state!==null&&i.find(".state").val(t.state),t.country!==null&&i.find(".country").val(t.country),t.countryText!==null&&i.find(".countryText").html(t.countryText),t.rfc!==null&&i.find(".rfc").val(t.rfc),n.editModeAddressData=n.$parent.find(".editMode").formhtml())}}function et(n,t){typeof t!="undefined"&&t!==null&&t.html(n.savedAddressData)}function ot(n){for(var i,u=0;u<t.length;u++)i=r.getAddressObject(t[u].id),typeof i=="undefined"||i===null?(i=new CommonAddress(t[u].id),i.$parent.find(".addressSelectionMode").val(n),r.push(i)):st(t.getAddressObject(i.id)),i=null;$("input.mainAddressSelectionMode").val(n);Modals.onlineAddressVerificationModal.closeModal()}function st(n){var i,t,r,f,u,e,o;typeof n!="undefined"&&n!==null&&(i=n.$parent.find(".editMode"),t=n.originalAddressFields,typeof t!="undefined"&&t!==null&&(t.addressLine1!==null&&$(t.addressLine1).val($(i).find(".addressLine1").val()),t.addressLine2!==null&&$(t.addressLine2).val($(i).find(".addressLine2").val()),t.suiteType!==null&&t.suiteTypeText!==null&&($(t.suiteType).val($(i).find(".suiteTypeSelectedValue").val()),$(t.suiteTypeText).val($(i).find(".suiteTypeText").val()),$(t.suiteType).change()),t.zipCode!==null&&$(t.zipCode).val($(i).find(".zipCode").val()),t.city!==null&&$(t.city).val($(i).find(".city").val()),t.cityList!==null&&(r=$(t.cityList),f=$(i).find(".cityListSelectedValue"),r.html(""),r.html(f.formhtml()),r.val(f.val()),r.find("option").length>0?(r.show(),$(t.city).hide()):(r.hide(),$(t.city).show())),t.stateList!==null&&(u=$(t.stateList),e=$(i).find(".state"),u.html(""),u.html(e.formhtml()),u.val(e.val())),t.countryList!==null&&$(t.countryList).val($(i).find(".country").val()),t.rfc!==null&&(o=$(i).find(".rfc"),o.is(":visible")?($(t.rfc).val($(i).find(".rfc").val()),$(t.rfc).show()):$(t.rfc).hide()),typeof t.parentCallbackFunction!="undefined"&&typeof t.parentCallbackFunction=="function"&&ht(t.parentCallbackFunction,n)))}function ht(n,t){var i=f(t);n(i)}function ct(n){var t=i(n),r;typeof t!="undefined"&&t!==null&&(typeof t.mode!="undefined"&&t.mode==="editMode"?(t.$parent.find(".editMode").hide(),typeof t.isAddressSaved=="boolean"&&t.isAddressSaved===!0?(t.$parent.find(".viewMode").hide(),t.$parent.find(".saveMode").show(),t.mode="saveMode"):(t.$parent.find(".saveMode").hide(),t.$parent.find(".viewMode").show(),t.mode="viewMode"),typeof t.editModeAddressData!="undefined"&&t.editModeAddressData!=null&&(t.$parent.find(".editMode").html(t.editModeAddressData),r=CommonAddressHelper.getCommonAddressClient(t.editModeInstanceId),r!=null&&r.initialize())):typeof t.mode!="undefined"&&t.mode==="saveMode"?(t.$parent.find(".saveMode").hide(),t.$parent.find(".viewMode").hide(),t.$parent.find(".editMode").show(),t.mode="editMode"):(t.$parent.find(".viewMode").hide(),t.$parent.find(".saveMode").hide(),t.$parent.find(".editMode").show(),t.mode="editMode"));t=null}function lt(n,t,r,u){var o;$(n).parent().parent().hide();c(r);u=u||"";u="."+u;var s="."+(t||"")+">td>div",f=i(n),e=0;f!=null&&(e=parseInt(f.$parent.find(".pickListItemsCount").val(),10));o="";e!=null&&e>=5?(e>5?$(u).css({"overflow-x":"hidden","overflow-y":"scroll",height:"240px"}):$(u).css({"overflow-x":"hidden","overflow-y":"hidden",height:"240px"}),o="340px"):($(u).css({"overflow-x":"hidden","overflow-y":"hidden",height:"200px"}),o="280px");typeof f!="undefined"&&f!==null&&f.$parent.find(s).css("height",o)}function c(n){n=n||"";n="."+n;$(n).show()}function at(n){n=n||"";n="."+n;$(n).hide()}function vt(n){u=n}function yt(n){var t=i(n),r;typeof t!="undefined"&&t!==null&&(r=t.$parent.find(".suggestedAddressButton"),r.hasClass("buttonDisabled")&&(r.removeClass("buttonDisabled"),r.prop("disabled",!1)),t.$parent.find(".selectedPicklistIndex").val($(n).val()));t=null}function pt(n){var t=i(n),r;typeof t!="undefined"&&t!==null&&(r=t.$parent.find(".suggestedAddressButton"),r.hasClass("buttonDisabled")&&(r.removeClass("buttonDisabled"),r.prop("disabled",!1)));t=null}function wt(n){var t="";n=n||"USA";switch(n){case"United States":case"USA":case"US":t="US";break;case"Mexico":case"MEX":case"MX":t="MX";break;case"Canada":case"CAN":case"CA":t="CA";break;default:t="US"}return t}function l(n){n=n||"simplemodal-container";var i={},r=$("form").position(),u=$(window).height(),f=$("form").width(),e=$("div."+n).width(),o=$("div."+n).height(),t=f-e;return i.left=r.left+t/2+"px",t=u-o,i.top=t<=0?r.top:t/2+"px",i}function bt(n,t,i){t=t||"simplemodal-container";i=i||"simplemodal-wrap";var r=l(t)||{left:"",top:"200px"};$("#"+n).parent("div").parent("div").css("height","auto");$("div."+t).find("div."+i).css({overflow:"visible"});$("div."+t).css({position:"absolute",left:r.left,top:r.top})}this.prototype={};var n=this,t=[],r=[],u;return Array.prototype.isAddressPresent=function(n){for(var i=this,r=!1,t=i.length-1;t>=0;t--)if(i[t].id===n){r=!0;break}return r},Array.prototype.getAddressObject=function(n){var t=$.grep(this,function(t){return t.id===parseInt(n,10)});return t.length>0?t[0]:null},n.registerAddress=v,n.getAddressObjectById=a,n.performSelection=s,n.cancelPopup=ot,n.switchMode=ct,n.showSaveMode=h,n.showMorePotentialAddresses=lt,n.showElementsByClass=c,n.hideElementsByClass=at,n.initializeHelper=vt,n.selectPicklistItem=yt,n.selectSuggestedAddress=pt,n.getShortCountryCode=wt,n.validateEnteredAddress=y,n.haveAllSelectionsPerformed=e,n.getPosition=l,n.adjustPosition=bt,{registerAddress:n.registerAddress,getAddressObjectById:n.getAddressObjectById,performSelection:n.performSelection,cancelPopup:n.cancelPopup,switchMode:n.switchMode,showMorePotentialAddresses:n.showMorePotentialAddresses,showElementsByClass:n.showElementsByClass,hideElementsByClass:n.hideElementsByClass,initializeHelper:n.initializeHelper,selectPicklistItem:n.selectPicklistItem,selectSuggestedAddress:n.selectSuggestedAddress,getShortCountryCode:n.getShortCountryCode,validateEnteredAddress:n.validateEnteredAddress,haveAllSelectionsPerformed:n.haveAllSelectionsPerformed,adjustPosition:n.adjustPosition,getPosition:n.getPosition}}();
//# sourceMappingURL=AddressVerificationDialog.min.js.map