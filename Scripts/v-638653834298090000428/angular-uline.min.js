function NewGuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,i=n==="x"?t:t&3|8;return i.toString(16)})}function ClientAppArgs(){var n,t;this.GetUrl="";this.GetInputRetriever=null;this.GetSavedInputRetriever=null;this.ControllerName="";this.BeforeGetCallAction=null;this.AfterSavedGetCallAction=null;this.AfterGetCallAction=null;this.CallGetOnLoad=!1;this.NoDataHandler=null;this.DataExistsHandler=null;this.GlobalDataGroup=null;this.SortType=null;this.SortReverse=!1;this.FilterString="";this.FilterHandler=null;this.PageName=null;this.PageSessionObjects=[];this.HasSavedDataLoaded=!1;this.HasSavedData=!1;this.PageGuid=NewGuid();n=Array.prototype.slice.call(arguments,0);n&&n.length==1&&(this.PageName=n[0]);typeof Storage!="undefined"&&this.PageName&&(t=sessionStorage.getItem(this.PageName+"_SavedData"),t&&(this.PageSessionObjects=JSON.parse(t),this.HasSavedData=!0));var i=function(){var n=this,t=Array.prototype.slice.call(arguments,0),i,r,u;if(t&&t.length>0){for(n.PageSessionObjects=[],i=0;i<t.length;i++)n.PageSessionObjects.push(t[i]);typeof Storage!="undefined"&&n.PageName&&(r="PageGuid_"+n.PageName,$("#"+r).length&&(u=n.PageGuid,$("#"+r).val(u),sessionStorage.setItem(r,u)),sessionStorage.setItem(n.PageName+"_SavedData",JSON.stringify(n.PageSessionObjects)))}},r=function(){var n=this;ulineAngularApp.controller(n.ControllerName,["$scope","$http","$sce",function(n,t,i){n.data=[];n.SkipHtmlValidation=function(n){return i.trustAsHtml(n)};n.HasData=function(n){return $.isArray(n)&&n.length>0||!$.isArray(n)&&n!=null}}])},u=function(){var n=this;ulineAngularApp.controller(n.ControllerName,["$scope","$http","$sce",function(t,i,r){function u(r){var f,e,u,o;t.data=[];f=n.GetInputRetriever;e=n.AfterGetCallAction;r&&(n.GetSavedInputRetriever&&(f=n.GetSavedInputRetriever),n.AfterSavedGetCallAction&&(e=n.AfterSavedGetCallAction),n.HasSavedDataLoaded=!0);!r&&n.BeforeGetCallAction&&typeof n.BeforeGetCallAction=="function"&&n.BeforeGetCallAction(t,r);u=f&&typeof f=="function"?f(t):null;o=n.GetUrl;u&&typeof u=="string"?o+="/"+u:u&&typeof u=="object"&&(o+="?"+jQuery.param(u));i.get(o).then(function(i){angular.copy(i.data,t.data);n.GlobalDataGroup!=null&&(t.$parent.data[n.GlobalDataGroup]=t.data);t.HasData(i.data)?n.DataExistsHandler&&typeof n.DataExistsHandler=="function"&&n.DataExistsHandler(t,r):n.NoDataHandler&&typeof n.NoDataHandler=="function"&&n.NoDataHandler(t,r)},function(){alert("could not load data")}).then(function(){e&&typeof e=="function"&&e(t,r)})}if(t.data=[],n.SortType&&(t.SortType=n.SortType,t.SortReverse=n.SortReverse),t.FilterString=n.FilterString,n.FilterFunction&&typeof n.FilterFunction=="function"&&(t.FilterFunction=n.FilterFunction),n.HasSavedData&&!n.HasSavedDataLoaded){var f="PageGuid_"+n.PageName,e=sessionStorage.getItem(f);$("#"+f).length&&e&&e==$("#"+f).val()?u(!0):n.CallGetOnLoad&&u()}else n.CallGetOnLoad&&u();t.onFireGet=function(){console.log(n.ControllerName+".onFireGet");u()};t.SkipHtmlValidation=function(n){return r.trustAsHtml(n)};t.HasData=function(n){return $.isArray(n)&&n.length>0||!$.isArray(n)&&n!=null&&n!=""}}])};ClientAppArgs.prototype.AddController=r;ClientAppArgs.prototype.SavePageData=i;ClientAppArgs.prototype.WaitForGet=u}var ulineAngularApp=angular.module("UlineClientApp",["ngSanitize"]);
//# sourceMappingURL=angular-uline.min.js.map
